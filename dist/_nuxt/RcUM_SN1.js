import{X as m,u as w,r as t,Y as b}from"./CxCRX2HS.js";import{u as $}from"./Dp98Z1pX.js";const S=m("courses",()=>{const r=$(),c=w(),{$toast:u}=b(),o=t(!1),n=t([]),a=t([]),l=t(null),i=t({}),g=t([]),y=t([]),v=async()=>{o.value=!0;try{const s=await r.get("courses/categories/");a.value=s}catch(s){console.log(s)}finally{o.value=!1}},f=async s=>{o.value=!0;try{const e=await r.get("courses/",{params:s});n.value=e}catch(e){console.log(e)}finally{o.value=!1}},h=async s=>{o.value=!0;try{const e=await r.get(`/courses/${s}`);i.value=e}catch(e){e.response&&e.response.status===404&&c.push("/courses"),console.log(e)}finally{o.value=!1}},C=async s=>{o.value=!0;try{const e=await r.get(`/courses/lessons/${s}`);g.value=e}catch(e){e.response&&e.response.status===404&&c.push("/courses")}finally{o.value=!1}},d=()=>{a.value.length>0&&p(a.value[0].id)},p=async s=>{l.value=s,await f({cat_id:s})};return{getCategories:v,getCourses:f,getCoursesId:h,getBoughtCourses:async()=>{o.value=!0;try{const s=await r.get("courses/bought-courses/");y.value=s.results}catch(s){u.error(s.response.data.message)}finally{o.value=!1}},categories:a,courses:n,course:i,setCategoryId:d,selectCategory:p,selectedCategory:l,boughtCourses:y,buyCourses:async s=>{o.value=!0;try{(await r.post("/courses/buy-course/",{courses:s})).code===200&&u.success("Kurslar muvaffaqiyatli sotib olindi")}catch(e){u.error(e.response.data.message)}finally{o.value=!1}},getLessonsId:C,lesson:g,loading:o}});export{S as u};
