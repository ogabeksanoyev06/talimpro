import{X as w,u as m,r as t,Y as b}from"./CFo8F1Pj.js";import{u as $}from"./Um3k6MUM.js";const q=w("courses",()=>{const r=$(),c=m(),{$toast:u}=b(),o=t(!1),n=t([]),a=t([]),l=t(null),i=t({}),g=t([]),y=t([]),h=async()=>{o.value=!0;try{const s=await r.get("courses/categories/");a.value=s}catch(s){console.log(s)}finally{o.value=!1}},f=async s=>{o.value=!0;try{const e=await r.get("courses/",{params:s});n.value=e}catch(e){console.log(e)}finally{o.value=!1}},p=async s=>{o.value=!0;try{const e=await r.get(`/courses/${s}`);i.value=e}catch(e){e.response&&e.response.status===404&&c.push("/courses"),console.log(e)}finally{o.value=!1}},C=async s=>{o.value=!0;try{const e=await r.get(`/courses/lessons/${s}`);g.value=e}catch(e){e.response&&e.response.status===404&&c.push("/courses")}finally{o.value=!1}},d=()=>{a.value.length>0&&v(a.value[0].id)},v=async s=>{l.value=s,await f({cat_id:s})};return{getCategories:h,getCourses:f,getCoursesId:p,getBoughtCourses:async()=>{o.value=!0;try{const s=await r.get("courses/bought-courses/");y.value=s.results}catch(s){u.error(s.response.data.message)}finally{o.value=!1}},categories:a,courses:n,course:i,setCategoryId:d,selectCategory:v,selectedCategory:l,boughtCourses:y,buyCourses:async s=>{o.value=!0;try{(await r.post("/courses/buy-course/",{courses:s})).code===200&&(u.success("Kurslar muvaffaqiyatli sotib olindi"),await p(s[0]))}catch(e){u.error(e.response.data.message)}finally{o.value=!1}},getLessonsId:C,lesson:g,loading:o}});export{q as u};
